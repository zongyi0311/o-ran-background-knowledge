# matlab架構(使用內建函式)

```text
+----------------------------------------------------------+
| Step 1: Generate random data                             |
| → data = randi([0 1], K, 1)                              |
+----------------------------------------------------------+
                            |
                            v
+----------------------------------------------------------+
| Step 2: LDPC encode                                       |
| → codeword = ldpcEncode(data, cfgEnc)                    |
+----------------------------------------------------------+
                            |
                            v
+----------------------------------------------------------+
| Step 3: π/4-QPSK modulation                               |
| → modsignal = pskmod(codeword, M=4, pi/4)                |
+----------------------------------------------------------+
                            |
                            v
+----------------------------------------------------------+
| Step 4: Add AWGN noise                                    |
| → rxsig = awgn(modsignal, SNR_dB)                        |
+----------------------------------------------------------+
                            |
                            v
+----------------------------------------------------------+
| Step 5: Demodulate to LLR                                 |
| → demod = pskdemod(rxsig, M=4, pi/4, 'llr')              |
+----------------------------------------------------------+
                            |
                            v
+----------------------------------------------------------+
| Step 6: LDPC decode                                       |
| → rxbits = ldpcDecode(demod, cfgDec, max_iter)           |
+----------------------------------------------------------+
                            |
                            v
+----------------------------------------------------------+
| Step 7: Compare result and count errors                   |
| → errors = sum(rxbits ~= data)                           |
+----------------------------------------------------------+
                            |
                            v
+----------------------------------------------------------+
| Step 8: Accumulate BER statistics                         |
| → BER(idx) = total_errors / total_bits                   |
+----------------------------------------------------------+
```

---

# matlab matlab架構(自己寫的演算法)
```text
+--------------------------------------------------------+
| Step 1: Set LDPC parameters                            |
| → k=64, n=128, d=0.3, m=n-k                            |
+--------------------------------------------------------+
                        |
                        v
+--------------------------------------------------------+
| Step 2: Generate random parity-check matrix P (sparse) |
| → Each row has ~d*k ones                               |
+--------------------------------------------------------+
                        |
                        v
+--------------------------------------------------------+
| Step 3: Build LDPC matrices                            |
| → H = [P | I], G = [I | P']                            |
+--------------------------------------------------------+
                        |
                        v
+--------------------------------------------------------+
| Step 4: Generate random message                        |
| → msg = randi([0 1], 1, k)                             |
+--------------------------------------------------------+
                        |
                        v
+--------------------------------------------------------+
| Step 5: Encode with G                                  |
| → codeword = mod(msg * G, 2)                           |
+--------------------------------------------------------+
                        |
                        v
+--------------------------------------------------------+
| Step 6: QPSK modulation                                |
| → symbols = (1 - 2*b0) + j*(1 - 2*b1)                  |
+--------------------------------------------------------+
                        |
                        v
+--------------------------------------------------------+
| Step 7: Add AWGN noise                                 |
| → rx = symbols + noise                                 |
+--------------------------------------------------------+
                        |
                        v
+--------------------------------------------------------+
| Step 8: Compute LLRs                                   |
| → Based on real and imag part of rx                    |
+--------------------------------------------------------+
                        |
                        v
+--------------------------------------------------------+
| Step 9: Build Tanner graph from H                      |
| → Find variable-check node connections                 |
+--------------------------------------------------------+
                        |
                        v
+--------------------------------------------------------+
| Step 10: Belief Propagation decoding                   |
| → Iteratively update msg_v2c and msg_c2v               |
| → Decode est_codeword from total LLR                   |
+--------------------------------------------------------+
                        |
                        v
+--------------------------------------------------------+
| Step 11: Check syndrome                                |
| → If H·est_codeword' mod 2 == 0, decoding succeeded    |
+--------------------------------------------------------+
                        |
                        v
+--------------------------------------------------------+
| Step 12: Calculate BER                                 |
| → Compare est_msg with msg                             |
+--------------------------------------------------------+
```
---

我們有兩種方式，一種是用內建函式做的，另一種是我們自己寫的演算法，我們自己寫問題在於效能不佳，沒辦法處理太長的資料。

---
我們想比較oai裡面rfsimulator用的LDPC的編碼與解碼像是3GPP NR LDPC標準跟matlab用的DVB-S2 LDPC標準或是我們自己的，還有QPSK調變跟解調 LLR的計算方式，在資料碼率相同，長度也相同的情況使用AWGN通道下對於不同SNR值，BER值的結果，觀察疊代次數產生的影響。

分工的部份，目前是分為謝秉祐負責LDPC編碼的部份，林孝陽是解碼，陳宗誼負責AWGN通道跟QPSK調變。




